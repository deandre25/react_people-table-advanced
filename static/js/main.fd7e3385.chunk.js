(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{39:function(e,t,c){},40:function(e,t,c){},41:function(e,t,c){"use strict";c.r(t);var s=c(26),a=c(8),n=(c(36),c(37),c(3)),r=c(0),l=c(1),i=function(){return Object(l.jsx)("h1",{className:"title",children:"Home Page"})},j=c(5),o=c(9),d=c(10),b=c.n(d),u=function(e){return e.SEX="sex",e.QUERY="query",e.CENTURIES="centuries",e.SORT="sort",e.ORDER="order",e}({}),h=c(24),O=c(27);function x(e,t){var c=new URLSearchParams(e.toString());return Object.entries(t).forEach((function(e){var t=Object(j.a)(e,2),s=t[0],a=t[1];null===a?c.delete(s):Array.isArray(a)?(c.delete(s),a.forEach((function(e){c.append(s,e)}))):c.set(s,a)})),c.toString()}var m=["children","params"],p=function(e){var t=e.children,c=e.params,s=Object(O.a)(e,m),n=Object(a.d)(),r=Object(j.a)(n,1)[0];return Object(l.jsx)(a.b,Object(h.a)(Object(h.a)({to:{search:x(r,c)}},s),{},{children:t}))},f=["16","17","18","19","20"],v=function(){var e=Object(a.d)(),t=Object(j.a)(e,2),c=t[0],s=t[1],n=c.get(u.SEX)||"",r=c.get(u.QUERY)||"",i=c.getAll(u.CENTURIES)||[];return Object(l.jsxs)("nav",{className:"panel",children:[Object(l.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(l.jsxs)("p",{className:"panel-tabs","data-cy":"SexFilter",children:[Object(l.jsx)(p,{params:{sex:null},className:b()({"is-active":!n}),children:"All"}),Object(l.jsx)(p,{params:{sex:"m"},className:b()({"is-active":"m"===n}),children:"Male"}),Object(l.jsx)(p,{params:{sex:"f"},className:b()({"is-active":"f"===n}),children:"Female"})]}),Object(l.jsx)("div",{className:"panel-block",children:Object(l.jsxs)("p",{className:"control has-icons-left",children:[Object(l.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",value:r,onChange:function(e){s(x(c,{query:e.target.value||null}))}}),Object(l.jsx)("span",{className:"icon is-left",children:Object(l.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(l.jsx)("div",{className:"panel-block",children:Object(l.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(l.jsx)("div",{className:"level-left",children:f.map((function(e){return Object(l.jsx)(p,{"data-cy":"century",className:b()("button mr-1",{"is-info":i.includes(e)}),params:{centuries:i.includes(e)?i.filter((function(t){return e!==t})):[].concat(Object(o.a)(i),[e])},children:e},e)}))}),Object(l.jsx)("div",{className:"level-right ml-4",children:Object(l.jsx)(p,{"data-cy":"centuryALL",className:"button is-success is-outlined",params:{centuries:null},children:"All"})})]})}),Object(l.jsx)("div",{className:"panel-block",children:Object(l.jsx)(p,{className:"button is-link is-outlined is-fullwidth",params:{sex:null,query:null,centuries:null},children:"Reset all filters"})})]})},N=(c(39),function(){return Object(l.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(l.jsx)("div",{className:"Loader__content"})})}),g=function(e){var t=e.person,c=t.name,s=t.sex,r=t.born,i=t.died,j=t.fatherName,o=t.motherName,d=t.slug,u=t.mother,h=t.father,O=Object(n.q)().personSlug;return Object(l.jsxs)("tr",{"data-cy":"person",className:b()({"has-background-warning":d===O}),children:[Object(l.jsx)("td",{children:Object(l.jsx)(a.b,{className:b()({"has-text-danger":"f"===s}),to:O?"../".concat(d):d,children:c})}),Object(l.jsx)("td",{children:s}),Object(l.jsx)("td",{children:r}),Object(l.jsx)("td",{children:i}),Object(l.jsx)("td",{children:u?Object(l.jsx)(a.b,{className:"has-text-danger",to:"../".concat(u.slug),children:o}):o||"-"}),Object(l.jsx)("td",{children:h?Object(l.jsx)(a.b,{to:"../".concat(h.slug),children:j}):j||"-"})]})},y=c(4),w=c(7),S="https://mate-academy.github.io/react_people-table/api/people.json";function E(e){return new Promise((function(t){return setTimeout(t,e)}))}function R(){return(R=Object(w.a)(Object(y.a)().mark((function e(){return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E(500).then((function(){return fetch(S)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=function(e){var t=e.sortBy,c=Object(a.d)(),s=Object(j.a)(c,1)[0],n=s.get(u.ORDER),r=s.get(u.SORT)||"",i={order:t!==r||n?null:"desc",sort:t===r&&n?null:t};return Object(l.jsx)(p,{params:i,children:Object(l.jsx)("span",{className:"icon",children:Object(l.jsx)("i",{className:b()("fas",{"fa-sort":r!==t,"fa-sort-up":r===t&&!n,"fa-sort-down":r===t&&n})})})})},T=function(e,t,c,s,a,n){var r=Object(o.a)(e);if(t&&(r=r.filter((function(e){return e.sex===t}))),s.length>0){r=r.filter((function(e){return s.includes(function(e){return Math.ceil(e.born/100)}(e).toString())}))}if(c){var l=c.toLowerCase();r=r.filter((function(e){var t,c;return e.name.includes(l)||(null===(t=e.motherName)||void 0===t?void 0:t.includes(l))||(null===(c=e.fatherName)||void 0===c?void 0:c.includes(l))}))}return a&&(r.sort((function(e,t){switch(a){case"name":case"sex":return e[a].localeCompare(t[a]);case"born":case"died":return e[a]-t[a];default:return 0}})),"desc"===n&&r.reverse()),r},A=function(){var e=Object(r.useState)(!0),t=Object(j.a)(e,2),c=t[0],s=t[1],n=Object(r.useState)(!1),i=Object(j.a)(n,2),o=i[0],d=i[1],b=Object(r.useState)([]),h=Object(j.a)(b,2),O=h[0],x=h[1],m=Object(a.d)(),p=Object(j.a)(m,1)[0],f=p.get(u.SEX),y=p.get(u.QUERY),w=p.getAll(u.CENTURIES),S=p.get(u.SORT),E=p.get(u.ORDER),A=T(O,f,y,w,S,E);return Object(r.useEffect)((function(){(function(){return R.apply(this,arguments)})().then((function(e){x(e)})).catch((function(){return d(!0)})).finally((function(){return s(!1)}))})),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h1",{className:"title",children:"People Page"}),Object(l.jsx)("div",{className:"block",children:Object(l.jsxs)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[Object(l.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:Object(l.jsx)(v,{})}),Object(l.jsx)("div",{className:"column",children:Object(l.jsxs)("div",{className:"box table-container",children:[c&&Object(l.jsx)(N,{}),o&&Object(l.jsx)("p",{"data-cy":"peopleLoadingError",children:"Something went wrong"}),!c&&!O.length&&Object(l.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"}),!!O.length&&Object(l.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:Object(l.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Name",Object(l.jsx)(k,{sortBy:"name"})]})}),Object(l.jsx)("th",{children:Object(l.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Sex",Object(l.jsx)(k,{sortBy:"sex"})]})}),Object(l.jsx)("th",{children:Object(l.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Born",Object(l.jsx)(k,{sortBy:"born"})]})}),Object(l.jsx)("th",{children:Object(l.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Died",Object(l.jsx)(k,{sortBy:"died"})]})}),Object(l.jsx)("th",{children:"Mother"}),Object(l.jsx)("th",{children:"Father"})]})}),Object(l.jsx)("tbody",{children:A.map((function(e){return Object(l.jsx)(g,{person:e},e.slug)}))})]})]})})]})})]})},P=function(){return Object(l.jsx)("h1",{className:"title",children:"Page not found"})},B=function(e){var t=e.isActive;return b()("navbar-item",{"has-background-grey-lighter":t})},C=function(){return Object(l.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)("div",{className:"navbar-brand",children:[Object(l.jsx)(a.c,{className:B,to:"/",children:"Home"}),Object(l.jsx)(a.c,{"aria-current":"page",className:B,to:"/people",children:"People"})]})})})},F=(c(40),function e(){return Object(l.jsxs)("div",{"data-cy":"app",children:[Object(l.jsx)(C,{}),Object(l.jsx)("main",{className:"section",children:Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)(n.d,{children:[Object(l.jsxs)(n.b,{path:"/",element:Object(l.jsx)(e,{}),children:[Object(l.jsx)(n.b,{index:!0,element:Object(l.jsx)(i,{})}),Object(l.jsx)(n.b,{path:"home",element:Object(l.jsx)(n.a,{to:"/",replace:!0})}),Object(l.jsxs)(n.b,{path:"people",children:[Object(l.jsx)(n.b,{index:!0,element:Object(l.jsx)(A,{})}),Object(l.jsx)(n.b,{path:":personSlug?",element:Object(l.jsx)(A,{})})]})]}),Object(l.jsx)(n.b,{path:"*",element:Object(l.jsx)(P,{})})]})})})]})});Object(s.createRoot)(document.getElementById("root")).render(Object(l.jsx)(a.a,{children:Object(l.jsx)(F,{})}))}},[[41,1,2]]]);
//# sourceMappingURL=main.fd7e3385.chunk.js.map